<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>PinchZoomer Content Zoomer jQuery Plugin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="description" content="This is a preview page for PinchZoomer jQuery Plugin">
    <meta name="author" content="Ron Feliciano">

    <!--<link href="complete_guide/css/prettify.min.css" type="text/css" rel="stylesheet" />-->
    <!--<link href="complete_guide/css/bootstrap.min.css" type="text/css" rel="stylesheet">-->
    <!--<link href="complete_guide/css/bootstrap-responsive.min.css" type="text/css" rel="stylesheet">-->
    <!--<link href="complete_guide/css/tooltipster.bundle.min.css" type="text/css" rel="stylesheet" />-->
    <!--<link href="complete_guide/css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-light.min.css" type="text/css" rel="stylesheet" />-->
    <!--<link href="complete_guide/css/pinchzoomer.min.css" type="text/css" rel="stylesheet">-->
    <!--<link href="complete_guide/css/preview.min.css" type="text/css" rel="stylesheet">-->
    <!--<script src="complete_guide/js/prettify.min.js" type="text/javascript" ></script>-->
    <!---->
    <!--<script src="complete_guide/js/jquery-1.11.3.min.js" type="text/javascript"></script>-->
    <!---->
    <!--<script src="complete_guide/js/tooltipster.bundle.min.js" type="text/javascript"></script>-->
    <!---->
    <!--<script src="complete_guide/js/bootstrap.min.js" type="text/javascript"></script>-->

    <!--<script src="complete_guide/js/hammer.min.js" type="text/javascript"></script>-->
    <!--<script src="complete_guide/js/TweenMax.min.js" type="text/javascript"></script>-->
    <!--<script src="complete_guide/js/jquery.pinchzoomer.min.js" type="text/javascript"></script>-->
    <!--<script src="complete_guide/js/preview.min.js" type="text/javascript"></script>-->

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <!--<script src="../assets/js/html5shiv.js"></script>-->
    <![endif]-->

    <link rel="stylesheet" href="/assets/pk2/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/assets/pk2/css/paper-kit.css"/>
    <link rel="stylesheet" href="/assets/pk2/css/nucleo-icons.css"/>
    <link rel="stylesheet" href="/build/css/app.css"/>
    <link rel="stylesheet"
          href="/bundles/sonatacore/vendor/components-font-awesome/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="/assets/codemirror/codemirror.min.css"/>
    <link rel="stylesheet" href="/assets/froala/2.8.4/froala_editor.pkgd.min.css"/>
    <link rel="stylesheet" href="/assets/froala/2.8.4/froala_style.min.css"/>
    <style>
        nav {
            height: 70px;
        }

        .spy-subchapter-navtitle {
            font-size: 0.8em;
        }

        .navbar-brand {
            margin: 0px !important;
        }

        #spy-chapter-navtitle, .spy-subchapter-navtitle {
            font-weight: bold;
        }

        .editing .offset-anchor {
            margin-top: 0px !important;
        }

        .offset-anchor {
            padding-top: 75px;
            margin-top: -75px;
        }

        .dropdown.show .dropdown-menu, .dropdown .dropdown-menu {
            background-color: white !important;
            box-shadow: 0 2px rgba(17, 16, 15, 0.1), 0 2px 10px rgba(17, 16, 15, 0.1);
            max-height: 560px;
            overflow-y: scroll;
        }

        .dropdown .dropdown-menu::-webkit-scrollbar, .dropdown.show .dropdown-menu::-webkit-scrollbar {
            width: 0px;
            background: transparent; /* make scrollbar transparent */
        }

        .dropdown.show .dropdown-menu .dropdown-item:hover, .dropdown.show .dropdown-menu .dropdown-item:focus, .dropdown .dropdown-menu .dropdown-item:hover, .dropdown .dropdown-menu .dropdown-item:focus {
            background-color: #66615B;
        }

        .btn-neutral:hover, .btn-neutral:focus, .btn-neutral:active, .btn-neutral.active, .show > .btn-neutral.dropdown-toggle {
            color: unset;
        }

        .dropdown-item.active, .dropdown-item:active {
            background-color: white;
            font-weight: bold;
        }

        #toc-modal .modal-title {
            font-weight: bold;
        }

        #toc-modal .modal-body {
            padding: 20px;
        }

        #toc-modal a {
            font-size: 14px;
        }

        #edit-button, #save-button {
            float: right;
            font-size: 20px;
        }

        #toc-sidebar ul {
            list-style-type: none;
        }

        #toc-sidebar a {
            cursor: pointer;
        }

        .admin-buttons {
            position: fixed;
            right: 3vw;
            top: 100px;
        }

        .pagination {
            width: 280px;
            margin: auto;
        }

        .bottom-nav {
            height: 50px;
        }

        @media (max-width: 767px) {
            .admin-buttons {
                position: relative;
                top: -70px;
            }

            .pagination {
                width: 280px;
                margin: auto;
            }

            .bottom-nav {
                height: 90px;
            }

        }

        /* Tree Item Styling */
        .jqtree_common.jqtree-selected {
            font-weight: bold;
        }

        /* Content Styling */
        .book-content strong {
            font-size: initial;
        }

        /* Link color */
        a {
            color: #3e3b6c;
        }

        a:hover, a:focus {
            color: #605ca8;
        }

        .btn-outline-primary {
            border-color: #605ca8;
            color: #605ca8;
        }

        .btn-outline-primary:hover, .btn-outline-primary:focus, .btn-outline-primary:active, .btn-outline-primary.active, .open > .btn-outline-primary.dropdown-toggle, .page-item.active .page-link {
            background-color: #605ca8;
            border-color: #605ca8;
        }

        .pagination > .page-item > .page-link, .pagination > .page-item:last-child > .page-link, .pagination > .page-item:first-child > .page-link {
            color: #605ca8;
            border-color: #605ca8;
        }

        .pagination > .page-item.active > .page-link {
            color: white;
        }

        .pagination > li.active > a:focus, .pagination > li.active > a:hover {
            background-color: #3e3b6c;
            border-color: #3e3b6c;
        }
    </style>

    <style>
        .disabled, .pagination > .page-item.disabled > .page-link {
            pointer-events: none;
            color: grey;
            border-color: grey;
        }

        .page-item {
            cursor: pointer;
        }

        .pagination {
            margin-left: auto;
            margin-bottom: 50px;
            /*margin-right: 0px;*/
        }

        .hide-chapter {
            opacity: 0;
            display: none;
        }

        .show-chapter {
            /*width: 100px;*/
            /*height: 100px;*/
            /*background: red;*/

            -webkit-animation-name: pagination-group-anim; /* Safari 4.0 - 8.0 */
            -webkit-animation-duration: 1s; /* Safari 4.0 - 8.0 */
            -webkit-animation-delay: 2s; /* Safari 4.0 - 8.0 */
            animation-name: pagination-group-anim;
            animation-duration: 1s;
            animation-delay: 0s;
            display: block;
            /*margin-left: 0px;*/
        }

        /* Safari 4.0 - 8.0 */
        @-webkit-keyframes pagination-group-anim {
            from {
                /*margin-left: 500px;*/
                opacity: 0.1;
            }
            to {
                /*margin-left: 0px;*/
                opacity: 1;
            }
        }

        @keyframes pagination-group-anim {
            from {
                /*margin-left: 500px;*/
                opacity: 0.1;
            }
            to {
                /*margin-left: 0px;*/
                opacity: 1;
            }
        }

        .bottom-nav {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
<h1>hey hey hey</h1>
<div class="zoomHolder">
    <img id="test1" src="http://cbook.magenta-dev.dk:8172/media-api/media/262/binaries/content_image_big/view"/>
</div>
<h2>data-elem</h2>
<div class="zoomHolder">
    <img id="test2" src="http://cbook.magenta-dev.dk:8172/media-api/media/262/binaries/content_image_big/view" data-elem="pinchzoomer">
</div>
<hr/>
<h2>let's go</h2>
<div class="zoomHolder">
    <!--<img data-src="http://cbook.magenta-dev.dk:8172/media-api/media/262/binaries/content_image_big/view" data-elem="pinchzoomer"/>-->
</div>


<script src="/build/app.js"></script>
<script src="/assets/pk2/js/paper-kit.js"></script>
<script src="/assets/froala/2.8.4/froala_editor.pkgd.min.js"></script>


<link href="/assets/pz_main/pinch_zoomer/css/pinchzoomer.min.css" rel="stylesheet">
<script src="/assets/pz_main/pinch_zoomer/js/hammer.min.js" type="text/javascript"></script>
<script src="/assets/pz_main/pinch_zoomer/js/TweenMax.min.js" type="text/javascript"></script>
<script src="/assets/pz_main/pinch_zoomer/js/jquery.pinchzoomer.min.js" type="text/javascript"></script>

<link href="/assets/pz_main/complete_guide/css/tooltipster.bundle.min.css" type="text/css" rel="stylesheet"/>
<script src="/assets/pz_main/pinch_zoomer/js/tooltipster.bundle.min.js" type="text/javascript"></script>

<script>
    let url = localStorage.getItem('uniqueUrl');
    if (url == undefined || url == null || url === '') {
        localStorage.setItem('uniqueUrl', '/magenta/N0FW/J2ZM-00PF-WHSX');
    }
    $(document).ready(function () {
        $('.logout').click(function (e) {
            localStorage.clear();
        })

        // /*$('img').wrap('<div class="zoomHolder"></div>');*/
        // $("img").pinchzoomer({maxZoom:5,
        //     allowDrag: true,
        //     scaleMode:"smart"}, true);

        // $("#test1").pinchzoomer({maxZoom:5}, true);
        $('#test1').attr('data-elem', 'pinchzoomer');
    });
</script>
<script>

    var toc = [{
        id: 291,
        name: '1. Chapter\u00201',
        href: '#chapter-1',
        chapterId: '291',
        children: [{
            id: 286,
            name: '1.1. Chapter\u00201.1',
            href: '#chapter-1.1',
            chapterId: '286',
        },]
        ,
    }, {
        id: 292,
        name: '2. Chapter\u00202',
        href: '#chapter-2',
        chapterId: '292',
    }, {
        id: 293,
        name: '3. Chapter\u00203',
        href: '#chapter-3',
        chapterId: '293',
        children: [{
            id: 287,
            name: '3.1. SubChapter\u00203.1',
            href: '#chapter-3.1',
            chapterId: '287',
        }, {
            id: 288,
            name: '3.2. SubChapter\u00203.2',
            href: '#chapter-3.2',
            chapterId: '288',
        }, {
            id: 289,
            name: '3.3. SubChapter\u00203.3\u0020\u0028D12\u0029',
            href: '#chapter-3.3',
            chapterId: '289',
        },]
        ,
    }, {
        id: 294,
        name: '4. Chapter\u00204',
        href: '#chapter-4',
        chapterId: '294',
    }, {
        id: 295,
        name: '5. Chapter\u00205',
        href: '#chapter-5',
        chapterId: '295',
        children: [{
            id: 290,
            name: '5.1. SubChapter\u00205.1',
            href: '#chapter-5.1',
            chapterId: '290',
        },]
        ,
    },]


    window.onCreateLi = function (node, $li) {
        // $li.find('.jqtree-title').html(
        //     `<a href="${node.href}">${node.name}</a>  <i class="fa fa-plus-circle" aria-hidden="true"> </i>`
        // );
    }

    $(document).ready(($) => {
        var $tocSidebar = $('#toc-sidebar');
        $tocSidebar.tree({
            data: toc,
            closedIcon: $('<i class="fa fa-arrow-circle-right"></i>'),
            openedIcon: $('<i class="fa fa-arrow-circle-down"></i>'),
            dragAndDrop: false,
            saveState: true,
            onCreateLi: onCreateLi
        });

        $tocSidebar.on(
            'tree.click',
            function (event) {
                // The clicked node is 'event.node'
                // var node = event.node;
                let url = '/magenta/N0FW/J2ZM-00PF-WHSX/chapter/0';
                let redirectUrl = url.replace('/chapter/0', '/chapter/' + event.node.id);
                // alert(node.name);
                console.log('Go to Chapter Page', event, url, redirectUrl);
                window.location = redirectUrl;
            }
        );

        var node = $tocSidebar.tree('getNodeById', 291);
        $tocSidebar.tree('selectNode', node);

        $tocModal = $('#toc-modal .modal-body');
        $tocModal.tree({
            data: toc,
            closedIcon: $('<i class="nc-icon nc-minimal-right"></i>'),
            openedIcon: $('<i class="nc-icon nc-minimal-down"></i>'),
            dragAndDrop: false,
            saveState: true,
            // onCreateLi: function (node, $li) {
            //     $li.find('.jqtree-title').html(
            //         `<a href="${node.href}" class="chapter-link">${node.name}</a>`
            //     );
            // }
        });

        $tocModal.on(
            'tree.click',
            function (event) {
                // The clicked node is 'event.node'
                // var node = event.node;
                let url = '/magenta/N0FW/J2ZM-00PF-WHSX/chapter/0';
                let redirectUrl = url.replace('/chapter/0', '/chapter/' + event.node.id);
                // alert(node.name);
                console.log('From Toc Modal: Go to Chapter Page', event, url, redirectUrl);
                window.location = redirectUrl;
            }
        );

        $('#toc-modal a.chapter-link').click(() => {
            $('#toc-modal').modal('hide');
        })

        $('body').scrollspy({target: '#cbook-navbar', offset: 75})
        $(window).scroll((e) => {
            var currentChapter = $('.dropdown-item.active:not(.sub)').text();
            if (currentChapter) {
                $('#spy-chapter-navtitle').text(currentChapter)
                console.log('currentChapter is not null ' + currentChapter)
            } else {
                if (typeof href != "undefined") {
                    var href = $('.dropdown-item.active').attr('href');
                    var id = href.substring(0, href.lastIndexOf('-'));
                    console.log('heyeee', href, id);
                    $('#spy-chapter-navtitle').text($(id).text());
                } else {
                    // console.log('jquery lookup of (\'.dropdown-item.active\') is not found');
                }
            }
            $('.subchapter-nav').hide();
            $('.sub.dropdown-item.active').parents('.subchapter-nav').show();
            $('.sub.dropdown-item.active').parents('.subchapter-nav').find('.spy-subchapter-navtitle').text($('.sub.dropdown-item.active').text());
            if ($(window).scrollTop() < 50) {
                $('#spy-chapter-navtitle').text('Your book on the cloud');
            }
        })
    })
</script>

<script>
    $('.next-item-group').click(function (e) {
        $('.previous-item-group').removeClass('disabled');

        console.log('current group is ', $(this).parents('ul').data('currentGroup'));
        let currentGroup = $(this).parents('ul').data('currentGroup');
        let nextGroup = currentGroup + 1;
        $currentGroupPageItems = $('.page-item[data-group="' + currentGroup + '"]');
        $nextGroupPageItems = $('.page-item[data-group="' + nextGroup + '"]');
        $currentGroupPageItems.removeClass('show-chapter');
        $currentGroupPageItems.addClass('hide-chapter');
        $nextGroupPageItems.addClass('show-chapter');
        $nextGroupPageItems.removeClass('hide-chapter');

        $(this).parents('ul').data('currentGroup', nextGroup);
        if (nextGroup * 3 > 5) {
            $(this).addClass('disabled');
        }
    })

    $('.previous-item-group').click(function (e) {
        $('.next-item-group').removeClass('disabled');

        console.log('current group is ', $(this).parents('ul').data('currentGroup'));
        let currentGroup = $(this).parents('ul').data('currentGroup');
        let nextGroup = currentGroup - 1;
        if (nextGroup === 0) {
            nextGroup = 1;
        }
        $currentGroupPageItems = $('.page-item[data-group="' + currentGroup + '"]');
        $nextGroupPageItems = $('.page-item[data-group="' + nextGroup + '"]');
        $currentGroupPageItems.removeClass('show-chapter');
        $currentGroupPageItems.addClass('hide-chapter');
        $nextGroupPageItems.addClass('show-chapter');
        $nextGroupPageItems.removeClass('hide-chapter');

        $(this).parents('ul').data('currentGroup', nextGroup);
        if (nextGroup <= 1) {
            $(this).addClass('disabled');
        }
    })

</script>

<script>


</script>

<!--




-->
<hr>
</body>
</html>
